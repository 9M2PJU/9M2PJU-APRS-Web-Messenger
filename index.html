<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>9M2PJU APRS Web Messenger</title>
    <meta name="description"
        content="A premium, glassmorphism APRS web messenger for sending and receiving messages via APRS-IS.">
    <link rel="stylesheet" href="src/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=JetBrains+Mono:wght@400;500;700&display=swap"
        rel="stylesheet">
    <link rel="icon" type="image/png" href="assets/favicon.png">
</head>

<body>
    <div id="app">
        <!-- Login Overlay -->
        <div id="login-overlay" class="overlay">
            <div class="glass-card login-card">
                <pre class="ascii-art">
  /\
 /  \
/ /\ \
\/_/\ \
     \/
                </pre>
                <h1>9M2PJU APRS Web Messenger</h1>
                <p class="subtitle">Enter your credentials to connect</p>
                <div id="login-error" class="error-text hidden"></div>
                <form id="login-form">
                    <div class="input-group">
                        <label for="callsign">Callsign</label>
                        <input type="text" id="callsign" placeholder="e.g. 9M2PJU-1" required>
                    </div>
                    <div class="input-group">
                        <label for="password">Access Password</label>
                        <input type="password" id="password" placeholder="App Access Password" required>
                    </div>
                    <button type="submit" class="btn-primary">Login</button>
                    <p class="help-text">First time? Set your password here. Configuration (passcode/beacon) is in
                        Settings.</p>
                </form>
            </div>
        </div>

        <!-- Main Dashboard -->
        <main id="dashboard" class="hidden">
            <header class="glass-nav">
                <div class="logo">
                    <span class="logo-text">9M2PJU APRS <span class="accent">Web Messenger</span></span>
                </div>
                <div class="mobile-controls">
                    <button id="toggle-contacts" class="btn-icon-small" title="Toggle Contacts">‚ò∞</button>
                    <button id="toggle-radar" class="btn-icon-small" title="Toggle Radar">üõ∞Ô∏è</button>
                </div>
                <div class="user-info">
                    <div class="stats">
                        <span id="stat-uptime">UP 00:00</span>
                        <span id="stat-packets">PKT 0</span>
                    </div>
                    <span id="display-callsign">9M2PJU-1</span>
                    <button id="settings-btn" class="btn-icon-small" title="Settings">
                        <svg viewBox="0 0 24 24" width="18" height="18">
                            <path fill="currentColor"
                                d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z">
                            </path>
                        </svg>
                    </button>
                    <span id="connection-status" class="status-dot"></span>
                </div>
                <button id="logout-btn" class="btn-secondary">Logout</button>
            </header>

            <div class="content-wrapper">
                <aside class="sidebar glass-card">
                    <div class="sidebar-header">
                        <h2>Contacts</h2>
                        <button id="add-contact-btn" title="Add Contact">+</button>
                    </div>
                    <ul id="contact-list">
                        <!-- Contacts go here -->
                        <li class="contact active" data-callsign="APRS-IS">
                            <div class="avatar">IS</div>
                            <div class="contact-info">
                                <span class="name">APRS-IS</span>
                                <span class="last-msg">Server Info</span>
                            </div>
                        </li>
                    </ul>
                </aside>

                <section class="chat-area glass-card">
                    <div class="chat-header">
                        <div class="header-main">
                            <h2 id="current-chat-name">APRS-IS</h2>
                            <span class="status">Gateway Active</span>
                        </div>
                        <div class="header-actions">
                            <button id="clear-chat-btn" class="btn-text-danger"
                                title="Clear Conversation">CLEAR</button>
                        </div>
                    </div>
                    <div id="message-container" class="messages">
                        <!-- Messages go here -->
                    </div>
                    <div class="quick-macros">
                        <button class="macro-btn">73</button>
                        <button class="macro-btn">QRV</button>
                        <button class="macro-btn">QSL</button>
                        <button class="macro-btn">SOS</button>
                    </div>
                    <form id="message-form" class="chat-input-area">
                        <input type="text" id="message-input" placeholder="Type a message..." autocomplete="off">
                        <button type="submit" id="send-btn" class="btn-icon">
                            <svg viewBox="0 0 24 24" width="24" height="24">
                                <path fill="currentColor" d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path>
                            </svg>
                        </button>
                    </form>
                </section>

                <aside class="right-panel glass-card">
                    <div class="panel-section">
                        <h3>RADAR_TRACK</h3>
                        <div id="radar-container" class="radar-box">
                            <div class="radar-dot ping"></div>
                            <div class="radar-line"></div>
                            <div id="radar-info">NO_GPS_LOCK</div>
                        </div>
                        <button id="send-gps-btn" class="btn-primary btn-full"
                            style="margin-top: 10px; font-size: 0.7rem;">SEND GPS NOW</button>
                    </div>
                    <div class="panel-section">
                        <h3>STATION_LOG</h3>
                        <div id="station-info" class="station-box">
                            <p>Select a contact to view telemetry</p>
                        </div>
                    </div>
                </aside>
            </div>

            <footer id="packet-console" class="glass-card monitor collapsed">
                <div class="monitor-header">
                    <span>9M2PJU_APRS_RAW_STREAM</span>
                    <button id="toggle-console">EXPAND</button>
                </div>
                <div id="console-output" class="monitor-content"></div>
            </footer>
        </main>

        <!-- Settings Modal -->
        <div id="settings-modal" class="overlay hidden">
            <div class="glass-card settings-card">
                <h2>System Configuration</h2>
                <div class="settings-content">
                    <section>
                        <h3>APRS-IS Gateway</h3>
                        <div class="input-group">
                            <label>Passcode</label>
                            <input type="password" id="settings-passcode" placeholder="Your passcode">
                        </div>
                        <div class="input-group">
                            <label>Local Access Password</label>
                            <input type="password" id="settings-app-password" placeholder="Change app password">
                        </div>
                    </section>
                    <section>
                        <h3>Beaconing (AIS-ST)</h3>
                        <div class="input-group">
                            <label>Status Message</label>
                            <input type="text" id="settings-status" placeholder="Online on APRS Web Messenger">
                        </div>
                        <div class="input-group">
                            <label>Interval (minutes)</label>
                            <input type="number" id="settings-interval" value="20" min="5">
                        </div>
                        <div class="input-group">
                            <label>APRS Symbol</label>
                            <select id="settings-symbol">
                                <option value="[">Jogger (Default)</option>
                                <option value=">">Car</option>
                                <option value="b">Bicycle</option>
                                <option value="<">Motorcycle</option>
                                <option value="j">Jeep</option>
                                <option value="k">Truck</option>
                                <option value="v">Van</option>
                                <option value="n">Node (Circle)</option>
                                <option value="y">House</option>
                            </select>
                        </div>
                    </section>
                </div>
                <div class="settings-actions-quick">
                    <button id="manual-gps-btn" class="btn-primary btn-full">TRIGGER MANUAL GPS BEACON</button>
                </div>
                <div class="settings-footer">
                    <button id="save-settings" class="btn-primary">Apply Changes</button>
                    <button id="close-settings" class="btn-secondary">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <script src="src/aprs.js" type="module"></script>
    <script src="src/app.js" type="module"></script>
</body>

</html>